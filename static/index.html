<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dyscalculia Tools</title>
    <link rel="apple-touch-icon" sizes="180x180" href="https://dyscalculiatools.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://dyscalculiatools.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://dyscalculiatools.com/favicon-16x16.png">
    <link rel="shortcut icon" href="https://dyscalculiatools.com/favicon.ico">
    <link rel="stylesheet" href="https://dyscalculiatools.com/styles.css">
</head>
<body>
    <header>
        <h1>Dyscalculia Tools</h1>
        <p>Evidence-Based Techniques for Dyscalculia</p>
    </header>
    <main>
        <section class="action-buttons">
            <button class="btn btn-primary" onclick="showTools()">Tools & Strategies</button>
            <button class="btn btn-primary" onclick="showResearch()">Research & Evidence</button>
        </section>
        
        <div class="content-container">
            <div id="tools-section" class="content-section">
                <h2>Search Tools & Strategies</h2>
                <p style="text-align: center; margin-bottom: 2rem; color: #666;">Find evidence-based tools and strategies for specific dyscalculia challenges</p>
                
                <div class="search-container">
                    <input type="text" id="tools-search" placeholder="Search for tools, strategies, or challenges..." />
                    <button class="btn btn-primary" id="tools-search-btn" onclick="searchTools()">Search</button>
                </div>
                
                <div class="tag-container">
                    <h3>Browse by Parent & Teacher Concerns:</h3>
                    <p style="font-size: 0.9em; color: #666; margin-bottom: 1rem;">Based on real feedback from 200+ parents and teachers</p>
                    <div class="tag-list">
                        <button class="tag priority-1" onclick="quickSearchToolsByConcern('Time')">üïê Time & Clocks <span class="concern-stat">(33%)</span></button>
                        <button class="tag priority-2" onclick="quickSearchToolsByConcern('Basic Arithmetic')">‚ûï Basic Arithmetic <span class="concern-stat">(23%)</span></button>
                        <button class="tag priority-3" onclick="quickSearchToolsByConcern('Number Sense')">üî¢ Number Sense <span class="concern-stat">(16%)</span></button>
                        <button class="tag priority-4" onclick="quickSearchToolsByConcern('Anxiety')">üò∞ Math Anxiety <span class="concern-stat">(8%)</span></button>
                        <button class="tag priority-5" onclick="quickSearchToolsByConcern('Spatial')">üìê Spatial Skills <span class="concern-stat">(7%)</span></button>
                        <button class="tag priority-6" onclick="quickSearchToolsByConcern('Memory')">üß† Memory Support <span class="concern-stat">(5%)</span></button>
                    </div>
                </div>
                
                <div id="tools-results" class="results-section"></div>
            </div>
            
            <div id="research-section" class="content-section" style="display: none;">
                <h2>Search Dyscalculia Research</h2>
                <p style="text-align: center; margin-bottom: 2rem; color: #666;">Explore our curated database of research studies specifically relevant to dyscalculia</p>
                
                <div class="search-container">
                    <input type="text" id="research-search" placeholder="Search for interventions, strategies, or topics..." />
                    <button class="btn btn-primary" id="search-btn" onclick="searchResearch()">Search</button>
                </div>
                
                <div class="tag-container">
                    <h3>Browse by Topic:</h3>
                    <div class="tag-list">
                        <button class="tag" onclick="quickSearch('multiplication facts')">Multiplication Facts</button>
                        <button class="tag" onclick="quickSearch('number sense')">Number Sense</button>
                        <button class="tag" onclick="quickSearch('math anxiety')">Math Anxiety</button>
                        <button class="tag" onclick="quickSearch('visual strategies')">Visual Strategies</button>
                        <button class="tag" onclick="quickSearch('working memory')">Working Memory</button>
                        <button class="tag" onclick="quickSearch('interventions')">Interventions</button>
                    </div>
                </div>
                
                <div id="search-results" class="results-section"></div>
            </div>
        </div>

    </main>
    <footer>
        <nav>
            <a href="/about">About</a>
            <a href="/contact">Contact</a>
        </nav>
    </footer>
    <script>
        function showTools() {
            document.getElementById('tools-section').style.display = 'block';
            document.getElementById('research-section').style.display = 'none';
            document.querySelectorAll('.action-buttons .btn')[0].classList.add('active');
            document.querySelectorAll('.action-buttons .btn')[1].classList.remove('active');
        }
        
        function showResearch() {
            document.getElementById('tools-section').style.display = 'none';
            document.getElementById('research-section').style.display = 'block';
            document.querySelectorAll('.action-buttons .btn')[1].classList.add('active');
            document.querySelectorAll('.action-buttons .btn')[0].classList.remove('active');
        }

        let toolsData = [];
        let researchData = [];
        
        fetch('https://dyscalculiatools.com/tools_data.json')
            .then(response => response.json())
            .then(data => { toolsData = data; })
            .catch(error => console.error('Error loading tools data:', error));
        
        fetch('https://dyscalculiatools.com/research_metadata.json')
            .then(response => response.json())
            .then(data => { researchData = data; })
            .catch(error => console.error('Error loading research data:', error));
        
        function searchTools() {
            const query = document.getElementById('tools-search').value.toLowerCase();
            if (!query.trim()) {
                document.getElementById('tools-results').innerHTML = '';
                return;
            }
            
            const results = toolsData.filter(tool => 
                tool.title.toLowerCase().includes(query) ||
                tool.description.toLowerCase().includes(query) ||
                tool.tags.some(tag => tag.toLowerCase().includes(query)) ||
                tool.challenges.some(challenge => challenge.toLowerCase().includes(query))
            );
            
            displayToolsResults(results);
        }
        
        function quickSearchTools(query) {
            document.getElementById('tools-search').value = query;
            const results = toolsData.filter(tool => 
                tool.title.toLowerCase().includes(query.toLowerCase()) ||
                tool.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase())) ||
                tool.challenges.some(challenge => challenge.toLowerCase().includes(query.toLowerCase()))
            );
            displayToolsResults(results);
        }
        
        function quickSearchToolsByConcern(concernCategory) {
            document.getElementById('tools-search').value = concernCategory;
            const results = toolsData.filter(tool => 
                tool.concern_category && tool.concern_category.toLowerCase().includes(concernCategory.toLowerCase())
            );
            // Sort by priority level (lower number = higher priority)
            results.sort((a, b) => (a.priority_level || 999) - (b.priority_level || 999));
            displayToolsResults(results);
        }
        
        function displayToolsResults(results) {
            const resultsDiv = document.getElementById('tools-results');
            if (!results || results.length === 0) {
                resultsDiv.innerHTML = '<p>No tools found matching your search.</p>';
                return;
            }
            
            let html = '<div class="results-count">Found ' + results.length + ' tools and strategies</div>';
            results.forEach(tool => {
                const priorityBadge = tool.priority_level <= 3 ? '<span class="priority-badge">High Priority</span>' : '';
                html += `
                    <div class="tool-item">
                        <h3>${tool.title} ${priorityBadge}</h3>
                        ${tool.concern_category ? `<p class="concern-category">Addresses: ${tool.concern_category}</p>` : ''}
                        <p class="tool-description">${tool.description}</p>
                        <div class="tool-details">
                            <p><strong>Age Range:</strong> ${tool.age_range}</p>
                            <p><strong>Setting:</strong> ${tool.setting}</p>
                            <p><strong>Time Required:</strong> ${tool.time_required}</p>
                            <p><strong>Materials:</strong> ${tool.materials}</p>
                        </div>
                        <div class="tool-steps">
                            <h4>How to Use:</h4>
                            <ol>
                                ${tool.steps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                        </div>
                        <div class="tags">
                            ${tool.tags.map(tag => `<span class="tag tool-tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
            });
            resultsDiv.innerHTML = html;
        }
        
        function searchResearch() {
            const query = document.getElementById('research-search').value.toLowerCase();
            if (!query.trim()) {
                document.getElementById('search-results').innerHTML = '';
                return;
            }
            
            const results = researchData.filter(item => 
                item.title.toLowerCase().includes(query) ||
                item.authors.toLowerCase().includes(query) ||
                item.summary.toLowerCase().includes(query) ||
                item.tags.some(tag => tag.toLowerCase().includes(query)) ||
                (item.keywords && item.keywords.some(keyword => keyword.toLowerCase().includes(query)))
            );
            
            displayResults(results);
        }
        
        function quickSearch(query) {
            document.getElementById('research-search').value = query;
            const results = researchData.filter(item => 
                item.title.toLowerCase().includes(query.toLowerCase()) ||
                item.tags.some(tag => tag.toLowerCase().includes(query.toLowerCase())) ||
                (item.keywords && item.keywords.some(keyword => keyword.toLowerCase().includes(query.toLowerCase())))
            );
            displayResults(results);
        }
        
        function displayResults(data) {
            const resultsDiv = document.getElementById('search-results');
            if (!data || data.length === 0) {
                resultsDiv.innerHTML = '<p>No research found matching your search.</p>';
                return;
            }
            
            let html = '<div class="results-count">Found ' + data.length + ' research studies</div>';
            data.forEach(item => {
                html += `
                    <div class="result-item">
                        <h3>${item.title}</h3>
                        <p class="authors">${item.authors}</p>
                        <p class="summary">${item.summary}</p>
                        <div class="tags">
                            ${item.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;
            });
            resultsDiv.innerHTML = html;
        }
        

        document.addEventListener('DOMContentLoaded', function() {
            showTools();
            
            document.getElementById('tools-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchTools();
            });
            
            document.getElementById('research-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchResearch();
            });
        });
    </script>
</body>
</html>
